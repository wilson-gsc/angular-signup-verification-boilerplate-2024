import{d as U}from"./chunk-52DVKZES.js";import{b as _,e as w}from"./chunk-6YFZBJY7.js";import{$,A as i,B as c,C as X,D as x,E as u,G as s,L as v,Q as E,S,V as Y,W as Z,aa as I,ba as f,ca as R,da as T,ea as P,fa as N,ga as k,ha as ee,i as Q,ia as te,j as h,ja as ie,l as G,la as F,ma as re,n as J,o as W,oa as V,pa as ne,q as a,qa as b,r as p,ra as y,s as g,t as B,ta as H,u as d,w as o,z as r}from"./chunk-G6OFTRNW.js";var oe=(()=>{class e{constructor(t,m){this.router=t,this.accountService=m,this.accountService.accountValue&&this.router.navigate(["/"])}static{this.\u0275fac=function(m){return new(m||e)(p(b),p(_))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-sm-8","offset-sm-2","mt-5"],[1,"card","m-3"]],template:function(m,n){m&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c(4,"router-outlet"),i()()()())},dependencies:[ne],encapsulation:2})}}return e})();var ae=e=>({"is-invalid":e});function ve(e,l){e&1&&(r(0,"div"),s(1,"Email is required"),i())}function ge(e,l){e&1&&(r(0,"div"),s(1,"Email is invalid"),i())}function _e(e,l){if(e&1&&(r(0,"div",14),d(1,ve,2,0,"div",15)(2,ge,2,0,"div",15),i()),e&2){let t=u();a(),o("ngIf",t.f.email.errors.required),a(),o("ngIf",t.f.email.errors.email)}}function he(e,l){e&1&&(r(0,"div"),s(1,"Password is required"),i())}function Ce(e,l){if(e&1&&(r(0,"div",14),d(1,he,2,0,"div",15),i()),e&2){let t=u();a(),o("ngIf",t.f.password.errors.required)}}function Se(e,l){e&1&&c(0,"span",16)}var be="angular-19-boilerplate-accounts",se=(()=>{class e{constructor(t,m,n,C,A,ue){this.formBuilder=t,this.route=m,this.router=n,this.accountService=C,this.alertService=A,this.http=ue,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[f.required,f.email]],password:["",f.required]});let t="/accounts/all";console.log("Attempting to fetch public accounts from:",t),this.http.get(t).subscribe({next:m=>{console.log("Successfully fetched public accounts:",m)},error:m=>{console.error("Error fetching public accounts:",m)}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.login(this.f.email.value,this.f.password.value).pipe(h()).subscribe({next:()=>{let t=this.route.snapshot.queryParams.returnUrl||"/";this.router.navigateByUrl(t)},error:t=>{this.alertService.error(t),this.loading=!1}}))}resetFakeBackendStorage(){localStorage.removeItem(be),location.reload()}static{this.\u0275fac=function(m){return new(m||e)(p(F),p(V),p(b),p(_),p(w),p(Z))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:24,vars:11,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"form-row"],[1,"form-group","col"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../register",1,"btn","btn-link"],[1,"form-group","col","text-right"],["routerLink","../forgot-password",1,"btn","btn-link","pr-0"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(m,n){m&1&&(r(0,"h3",0),s(1,"Login"),i(),r(2,"div",1)(3,"form",2),x("ngSubmit",function(){return n.onSubmit()}),r(4,"div",3)(5,"label"),s(6,"Email"),i(),c(7,"input",4),d(8,_e,3,2,"div",5),i(),r(9,"div",3)(10,"label"),s(11,"Password"),i(),c(12,"input",6),d(13,Ce,2,1,"div",5),i(),r(14,"div",7)(15,"div",8)(16,"button",9),d(17,Se,1,0,"span",10),s(18," Login "),i(),r(19,"a",11),s(20,"Register"),i()(),r(21,"div",12)(22,"a",13),s(23,"Forgot Password?"),i()()()()()),m&2&&(a(3),o("formGroup",n.form),a(4),o("ngClass",v(7,ae,n.submitted&&n.f.email.errors)),a(),o("ngIf",n.submitted&&n.f.email.errors),a(4),o("ngClass",v(9,ae,n.submitted&&n.f.password.errors)),a(),o("ngIf",n.submitted&&n.f.password.errors),a(3),o("disabled",n.loading),a(),o("ngIf",n.loading))},dependencies:[E,S,P,I,R,T,N,k,y],encapsulation:2})}}return e})();var M=e=>({"is-invalid":e});function ye(e,l){e&1&&(r(0,"div"),s(1,"Title is required"),i())}function we(e,l){if(e&1&&(r(0,"div",25),d(1,ye,2,0,"div",26),i()),e&2){let t=u();a(),o("ngIf",t.f.title.errors.required)}}function xe(e,l){e&1&&(r(0,"div"),s(1,"First Name is required"),i())}function Ee(e,l){if(e&1&&(r(0,"div",25),d(1,xe,2,0,"div",26),i()),e&2){let t=u();a(),o("ngIf",t.f.firstName.errors.required)}}function Ie(e,l){e&1&&(r(0,"div"),s(1,"Last Name is required"),i())}function Re(e,l){if(e&1&&(r(0,"div",25),d(1,Ie,2,0,"div",26),i()),e&2){let t=u();a(),o("ngIf",t.f.lastName.errors.required)}}function Te(e,l){e&1&&(r(0,"div"),s(1,"Email is required"),i())}function Pe(e,l){e&1&&(r(0,"div"),s(1,"Email must be a valid email address"),i())}function Ne(e,l){if(e&1&&(r(0,"div",25),d(1,Te,2,0,"div",26)(2,Pe,2,0,"div",26),i()),e&2){let t=u();a(),o("ngIf",t.f.email.errors.required),a(),o("ngIf",t.f.email.errors.email)}}function ke(e,l){e&1&&(r(0,"div"),s(1,"Password is required"),i())}function Fe(e,l){e&1&&(r(0,"div"),s(1,"Password must be at least 6 characters"),i())}function Ve(e,l){if(e&1&&(r(0,"div",25),d(1,ke,2,0,"div",26)(2,Fe,2,0,"div",26),i()),e&2){let t=u();a(),o("ngIf",t.f.password.errors.required),a(),o("ngIf",t.f.password.errors.minlength)}}function qe(e,l){e&1&&(r(0,"div"),s(1,"Confirm Password is required"),i())}function Me(e,l){e&1&&(r(0,"div"),s(1,"Passwords must match"),i())}function Le(e,l){if(e&1&&(r(0,"div",25),d(1,qe,2,0,"div",26)(2,Me,2,0,"div",26),i()),e&2){let t=u();a(),o("ngIf",t.f.confirmPassword.errors.required),a(),o("ngIf",t.f.confirmPassword.errors.mustMatch)}}function Ae(e,l){e&1&&(r(0,"div",25),s(1,"Accept Ts & Cs is required"),i())}function je(e,l){e&1&&c(0,"span",27)}var me=(()=>{class e{constructor(t,m,n,C,A){this.formBuilder=t,this.route=m,this.router=n,this.accountService=C,this.alertService=A,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({title:["",f.required],firstName:["",f.required],lastName:["",f.required],email:["",[f.required,f.email]],password:["",[f.required,f.minLength(6)]],confirmPassword:["",f.required],acceptTerms:[!1,f.requiredTrue],status:["Enabled"]},{validator:U("password","confirmPassword")})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.register(this.form.value).pipe(h()).subscribe({next:t=>{this.alertService.success("Registration successful, please check your email for verification instructions",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}}))}static{this.\u0275fac=function(m){return new(m||e)(p(F),p(V),p(b),p(_),p(w))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:56,vars:31,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group","form-check"],["type","checkbox","formControlName","acceptTerms","id","acceptTerms",1,"form-check-input",3,"ngClass"],["for","acceptTerms",1,"form-check-label"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login","href","",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(m,n){m&1&&(r(0,"h3",0),s(1,"Register"),i(),r(2,"div",1)(3,"form",2),x("ngSubmit",function(){return n.onSubmit()}),r(4,"div",3)(5,"div",4)(6,"label"),s(7,"Title"),i(),r(8,"select",5),c(9,"option",6),r(10,"option",7),s(11,"Mr"),i(),r(12,"option",8),s(13,"Mrs"),i(),r(14,"option",9),s(15,"Miss"),i(),r(16,"option",10),s(17,"Ms"),i()(),d(18,we,2,1,"div",11),i(),r(19,"div",12)(20,"label"),s(21,"First Name"),i(),c(22,"input",13),d(23,Ee,2,1,"div",11),i(),r(24,"div",12)(25,"label"),s(26,"Last Name"),i(),c(27,"input",14),d(28,Re,2,1,"div",11),i()(),r(29,"div",15)(30,"label"),s(31,"Email"),i(),c(32,"input",16),d(33,Ne,3,2,"div",11),i(),r(34,"div",3)(35,"div",4)(36,"label"),s(37,"Password"),i(),c(38,"input",17),d(39,Ve,3,2,"div",11),i(),r(40,"div",4)(41,"label"),s(42,"Confirm Password"),i(),c(43,"input",18),d(44,Le,3,2,"div",11),i()(),r(45,"div",19),c(46,"input",20),r(47,"label",21),s(48,"Accept Terms & Conditions"),i(),d(49,Ae,2,0,"div",11),i(),r(50,"div",15)(51,"button",22),d(52,je,1,0,"span",23),s(53," Register "),i(),r(54,"a",24),s(55,"Cancel"),i()()()()),m&2&&(a(3),o("formGroup",n.form),a(5),o("ngClass",v(17,M,n.submitted&&n.f.title.errors)),a(10),o("ngIf",n.submitted&&n.f.title.errors),a(4),o("ngClass",v(19,M,n.submitted&&n.f.firstName.errors)),a(),o("ngIf",n.submitted&&n.f.firstName.errors),a(4),o("ngClass",v(21,M,n.submitted&&n.f.lastName.errors)),a(),o("ngIf",n.submitted&&n.f.lastName.errors),a(4),o("ngClass",v(23,M,n.submitted&&n.f.email.errors)),a(),o("ngIf",n.submitted&&n.f.email.errors),a(5),o("ngClass",v(25,M,n.submitted&&n.f.password.errors)),a(),o("ngIf",n.submitted&&n.f.password.errors),a(4),o("ngClass",v(27,M,n.submitted&&n.f.confirmPassword.errors)),a(),o("ngIf",n.submitted&&n.f.confirmPassword.errors),a(2),o("ngClass",v(29,M,n.submitted&&n.f.acceptTerms.errors)),a(3),o("ngIf",n.submitted&&n.f.acceptTerms.errors),a(2),o("disabled",n.loading),a(),o("ngIf",n.loading))},dependencies:[E,S,P,te,ie,I,$,ee,R,T,N,k,y],encapsulation:2})}}return e})();function De(e,l){e&1&&(r(0,"div"),s(1," Verifying... "),i())}function Ge(e,l){e&1&&(r(0,"div"),s(1," Verification failed, you can also verify your account using the "),r(2,"a",3),s(3,"forgot password"),i(),s(4," page. "),i())}var z=function(e){return e[e.Verifying=0]="Verifying",e[e.Failed=1]="Failed",e}(z||{}),le=(()=>{class e{constructor(t,m,n,C){this.route=t,this.router=m,this.accountService=n,this.alertService=C,this.EmailStatus=z,this.emailStatus=z.Verifying}ngOnInit(){let t=this.route.snapshot.queryParams.token;this.router.navigate([],{relativeTo:this.route,replaceUrl:!0}),this.accountService.verifyEmail(t).pipe(h()).subscribe({next:()=>{this.alertService.success("Verification successful, you can now login",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:()=>{this.emailStatus=z.Failed}})}static{this.\u0275fac=function(m){return new(m||e)(p(V),p(b),p(_),p(w))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:5,vars:2,consts:[[1,"card-header"],[1,"card-body"],[4,"ngIf"],["routerLink","forgot-password"]],template:function(m,n){m&1&&(r(0,"h3",0),s(1,"Verify Email"),i(),r(2,"div",1),d(3,De,2,0,"div",2)(4,Ge,5,0,"div",2),i()),m&2&&(a(3),o("ngIf",n.emailStatus==n.EmailStatus.Verifying),a(),o("ngIf",n.emailStatus==n.EmailStatus.Failed))},dependencies:[S,y],encapsulation:2})}}return e})();var Be=e=>({"is-invalid":e});function Ue(e,l){e&1&&(r(0,"div"),s(1,"Email is required"),i())}function Oe(e,l){e&1&&(r(0,"div"),s(1,"Email is invalid"),i())}function ze(e,l){if(e&1&&(r(0,"div",9),d(1,Ue,2,0,"div",10)(2,Oe,2,0,"div",10),i()),e&2){let t=u();a(),o("ngIf",t.f.email.errors.required),a(),o("ngIf",t.f.email.errors.email)}}function He(e,l){e&1&&c(0,"span",11)}var de=(()=>{class e{constructor(t,m,n){this.formBuilder=t,this.accountService=m,this.alertService=n,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[f.required,f.email]]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.alertService.clear(),this.accountService.forgotPassword(this.f.email.value).pipe(h()).pipe(Q(()=>this.loading=!1)).subscribe({next:()=>this.alertService.success("Please check your email for password reset instructions"),error:t=>this.alertService.error(t)}))}static{this.\u0275fac=function(m){return new(m||e)(p(F),p(_),p(w))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:15,vars:7,consts:[[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(m,n){m&1&&(r(0,"h3",0),s(1,"Forgot Password"),i(),r(2,"div",1)(3,"form",2),x("ngSubmit",function(){return n.onSubmit()}),r(4,"div",3)(5,"label"),s(6,"Email"),i(),c(7,"input",4),d(8,ze,3,2,"div",5),i(),r(9,"div",3)(10,"button",6),d(11,He,1,0,"span",7),s(12," Submit "),i(),r(13,"a",8),s(14,"Cancel"),i()()()()),m&2&&(a(3),o("formGroup",n.form),a(4),o("ngClass",v(5,Be,n.submitted&&n.f.email.errors)),a(),o("ngIf",n.submitted&&n.f.email.errors),a(2),o("disabled",n.loading),a(),o("ngIf",n.loading))},dependencies:[E,S,P,I,R,T,N,k,y],encapsulation:2})}}return e})();var pe=e=>({"is-invalid":e});function Ke(e,l){e&1&&(r(0,"div"),s(1," Validating token... "),i())}function Qe(e,l){e&1&&(r(0,"div"),s(1," Token validation failed, if the token has expired you can get a new one at the "),r(2,"a",4),s(3,"forgot password"),i(),s(4," page. "),i())}function Je(e,l){e&1&&(r(0,"div"),s(1,"Password is required"),i())}function We(e,l){e&1&&(r(0,"div"),s(1,"Password must be at least 6 characters"),i())}function Xe(e,l){if(e&1&&(r(0,"div",13),d(1,Je,2,0,"div",2)(2,We,2,0,"div",2),i()),e&2){let t=u(2);a(),o("ngIf",t.f.password.errors.required),a(),o("ngIf",t.f.password.errors.minlength)}}function Ye(e,l){e&1&&(r(0,"div"),s(1,"Confirm Password is required"),i())}function Ze(e,l){e&1&&(r(0,"div"),s(1,"Passwords must match"),i())}function $e(e,l){if(e&1&&(r(0,"div",13),d(1,Ye,2,0,"div",2)(2,Ze,2,0,"div",2),i()),e&2){let t=u(2);a(),o("ngIf",t.f.confirmPassword.errors.required),a(),o("ngIf",t.f.confirmPassword.errors.mustMatch)}}function et(e,l){e&1&&c(0,"span",14)}function tt(e,l){if(e&1){let t=X();r(0,"form",5),x("ngSubmit",function(){J(t);let n=u();return W(n.onSubmit())}),r(1,"div",6)(2,"label"),s(3,"Password"),i(),c(4,"input",7),d(5,Xe,3,2,"div",8),i(),r(6,"div",6)(7,"label"),s(8,"Confirm Password"),i(),c(9,"input",9),d(10,$e,3,2,"div",8),i(),r(11,"div",6)(12,"button",10),d(13,et,1,0,"span",11),s(14," Reset Password "),i(),r(15,"a",12),s(16,"Cancel"),i()()()}if(e&2){let t=u();o("formGroup",t.form),a(4),o("ngClass",v(7,pe,t.submitted&&t.f.password.errors)),a(),o("ngIf",t.submitted&&t.f.password.errors),a(4),o("ngClass",v(9,pe,t.submitted&&t.f.confirmPassword.errors)),a(),o("ngIf",t.submitted&&t.f.confirmPassword.errors),a(2),o("disabled",t.loading),a(),o("ngIf",t.loading)}}var L=function(e){return e[e.Validating=0]="Validating",e[e.Valid=1]="Valid",e[e.Invalid=2]="Invalid",e}(L||{}),ce=(()=>{class e{constructor(t,m,n,C,A){this.formBuilder=t,this.route=m,this.router=n,this.accountService=C,this.alertService=A,this.TokenStatus=L,this.tokenStatus=L.Validating,this.token=null,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({password:["",[f.required,f.minLength(6)]],confirmPassword:["",f.required]},{validator:U("password","confirmPassword")});let t=this.route.snapshot.queryParams.token,m=typeof t=="string"?t:null;if(this.router.navigate([],{relativeTo:this.route,replaceUrl:!0}),!m)return this.tokenStatus=L.Invalid;this.accountService.validateResetToken(m).pipe(h()).subscribe({next:()=>{this.token=m,this.tokenStatus=L.Valid},error:()=>{this.tokenStatus=L.Invalid}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.resetPassword(this.token,this.f.password.value,this.f.confirmPassword.value).pipe(h()).subscribe({next:()=>{this.alertService.success("Password reset successful, you can now login",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:t=>{this.alertService.error(t),this.loading=!1}}))}static{this.\u0275fac=function(m){return new(m||e)(p(F),p(V),p(b),p(_),p(w))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:6,vars:3,consts:[[1,"card-header"],[1,"card-body"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["routerLink","../forgot-password"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(m,n){m&1&&(r(0,"h3",0),s(1,"Reset Password"),i(),r(2,"div",1),d(3,Ke,2,0,"div",2)(4,Qe,5,0,"div",2)(5,tt,17,11,"form",3),i()),m&2&&(a(3),o("ngIf",n.tokenStatus==n.TokenStatus.Validating),a(),o("ngIf",n.tokenStatus==n.TokenStatus.Invalid),a(),o("ngIf",n.tokenStatus==n.TokenStatus.Valid))},dependencies:[E,S,P,I,R,T,N,k,y],encapsulation:2})}}return e})();var it=[{path:"",component:oe,children:[{path:"login",component:se},{path:"register",component:me},{path:"verify-email",component:le},{path:"forgot-password",component:de},{path:"reset-password",component:ce}]}],fe=(()=>{class e{static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275mod=B({type:e})}static{this.\u0275inj=G({imports:[H.forChild(it),H]})}}return e})();var zt=(()=>{class e{static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275mod=B({type:e})}static{this.\u0275inj=G({imports:[Y,re,fe]})}}return e})();export{zt as AccountModule};
