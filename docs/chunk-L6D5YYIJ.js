import{b as Z,d as N,e as ee,f as A,g as te,i as D}from"./chunk-6YFZBJY7.js";import{A as i,B as v,C as k,D as I,E as u,G as o,H as s,L as f,N as j,P as O,Q as R,R as C,S as x,T as w,V,aa as B,ba as y,ca as G,da as P,ea as U,fa as $,ga as H,ha as z,ia as J,ja as K,ka as Q,l as _,ma as W,n as q,o as L,oa as X,q as d,qa as Y,r as c,ra as b,s as g,t as S,ta as F,u as p,w as a,z as n}from"./chunk-G6OFTRNW.js";var le=e=>["/employees/edit",e];function pe(e,m){e&1&&v(0,"span",12)}function se(e,m){e&1&&(n(0,"span"),o(1,"Delete"),i())}function ce(e,m){if(e&1){let t=k();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td"),o(8),i(),n(9,"td"),o(10),j(11,"date"),i(),n(12,"td"),o(13),i(),n(14,"td",8)(15,"a",9),o(16,"Edit"),i(),n(17,"button",10),I("click",function(){let r=q(t).$implicit,E=u();return L(E.deleteEmployee(r.id))}),p(18,pe,1,0,"span",11)(19,se,2,0,"span",7),i()()()}if(e&2){let t=m.$implicit;d(2),s(t.employeeId),d(2),s(t.user==null?null:t.user.email),d(2),s(t.position),d(2),s(t.department==null?null:t.department.name),d(2),s(O(11,10,t.hireDate,"mediumDate")),d(3),s(t.status),d(2),a("routerLink",f(13,le,t.id)),d(2),a("disabled",t.isDeleting),d(),a("ngIf",t.isDeleting),d(),a("ngIf",!t.isDeleting)}}function ue(e,m){e&1&&(n(0,"tr")(1,"td",13),o(2,"No employees found"),i()())}var ie=(()=>{class e{constructor(t){this.employeeService=t,this.employees=[]}ngOnInit(){this.employeeService.getAll().subscribe(t=>this.employees=t)}deleteEmployee(t){let l=this.employees.find(r=>r.id===t);l.isDeleting=!0,this.employeeService.delete(t).subscribe(()=>this.employees=this.employees.filter(r=>r.id!==t))}static{this.\u0275fac=function(l){return new(l||e)(c(A))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:25,vars:2,consts:[[1,"p-4"],[1,"container"],["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","10%"],[2,"width","20%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-right"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","7",1,"text-center"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Employees"),i(),n(4,"a",2),o(5,"Create Account"),i(),n(6,"table",3)(7,"thead")(8,"tr")(9,"th",4),o(10,"Employee ID"),i(),n(11,"th",5),o(12,"User"),i(),n(13,"th",5),o(14,"Position"),i(),n(15,"th",5),o(16,"Department"),i(),n(17,"th",4),o(18,"Hire Date"),i(),n(19,"th",4),o(20,"Status"),i(),v(21,"th",4),i()(),n(22,"tbody"),p(23,ce,20,15,"tr",6)(24,ue,3,0,"tr",7),i()()()()),l&2&&(d(23),a("ngForOf",r.employees),d(),a("ngIf",!(r.employees!=null&&r.employees.length)))},dependencies:[C,x,b,w],encapsulation:2})}}return e})();var h=e=>({"is-invalid":e});function fe(e,m){e&1&&(n(0,"div"),o(1,"Employee ID is required"),i())}function ve(e,m){if(e&1&&(n(0,"div",17),p(1,fe,2,0,"div",18),i()),e&2){let t=u();d(),a("ngIf",t.f.employeeId.errors.required)}}function ye(e,m){if(e&1&&(n(0,"option",19),o(1),i()),e&2){let t=m.$implicit;a("value",t.id),d(),s(t.email)}}function he(e,m){e&1&&(n(0,"div"),o(1,"User is required"),i())}function Ee(e,m){if(e&1&&(n(0,"div",17),p(1,he,2,0,"div",18),i()),e&2){let t=u();d(),a("ngIf",t.f.userId.errors.required)}}function _e(e,m){e&1&&(n(0,"div"),o(1,"Position is required"),i())}function ge(e,m){if(e&1&&(n(0,"div",17),p(1,_e,2,0,"div",18),i()),e&2){let t=u();d(),a("ngIf",t.f.position.errors.required)}}function Se(e,m){if(e&1&&(n(0,"option",19),o(1),i()),e&2){let t=m.$implicit;a("value",t.id),d(),s(t.name)}}function Ie(e,m){e&1&&(n(0,"div"),o(1,"Department is required"),i())}function Ce(e,m){if(e&1&&(n(0,"div",17),p(1,Ie,2,0,"div",18),i()),e&2){let t=u();d(),a("ngIf",t.f.departmentId.errors.required)}}function xe(e,m){e&1&&(n(0,"div"),o(1,"Hire Date is required"),i())}function be(e,m){if(e&1&&(n(0,"div",17),p(1,xe,2,0,"div",18),i()),e&2){let t=u();d(),a("ngIf",t.f.hireDate.errors.required)}}function Ae(e,m){e&1&&(n(0,"div",4)(1,"label"),o(2,"Status"),i(),n(3,"select",20)(4,"option",21),o(5,"Active"),i(),n(6,"option",22),o(7,"Inactive"),i()()())}var M=(()=>{class e{constructor(t,l,r,E,re,oe,de){this.formBuilder=t,this.route=l,this.router=r,this.employeeService=E,this.accountService=re,this.departmentService=oe,this.alertService=de,this.users=[],this.departments=[]}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({employeeId:["",y.required],userId:["",y.required],position:["",y.required],departmentId:["",y.required],hireDate:["",y.required],status:["Active"]}),this.accountService.getAll().subscribe(t=>this.users=t),this.departmentService.getAll().subscribe(t=>this.departments=t),this.isAddMode||this.employeeService.getById(this.id).subscribe(t=>this.form.patchValue(t))}get f(){return this.form.controls}onSubmit(){this.form.invalid||(this.isAddMode?this.createEmployee():this.updateEmployee())}createEmployee(){this.employeeService.create(this.form.value).subscribe({next:()=>{this.alertService.success("Employee created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/employees"])},error:t=>this.alertService.error(t)})}updateEmployee(){this.employeeService.update(this.id,this.form.value).subscribe({next:()=>{this.alertService.success("Employee updated successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/employees"])},error:t=>this.alertService.error(t)})}static{this.\u0275fac=function(l){return new(l||e)(c(Q),c(X),c(Y),c(A),c(Z),c(te),c(ee))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:42,vars:26,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","employeeId",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","userId",1,"form-control",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","position",1,"form-control",3,"ngClass"],["formControlName","departmentId",1,"form-control",3,"ngClass"],["type","date","formControlName","hireDate",1,"form-control",3,"ngClass"],["class","form-group",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary","mr-1",3,"disabled"],["routerLink","/employees",1,"btn","btn-secondary"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],["formControlName","status",1,"form-control"],["value","Active"],["value","Inactive"]],template:function(l,r){l&1&&(n(0,"div",0)(1,"h3",1),o(2),i(),n(3,"div",2)(4,"form",3),I("ngSubmit",function(){return r.onSubmit()}),n(5,"div",4)(6,"label"),o(7,"Employee ID"),i(),v(8,"input",5),p(9,ve,2,1,"div",6),i(),n(10,"div",4)(11,"label"),o(12,"User"),i(),n(13,"select",7)(14,"option",8),o(15,"Select User"),i(),p(16,ye,2,2,"option",9),i(),p(17,Ee,2,1,"div",6),i(),n(18,"div",4)(19,"label"),o(20,"Position"),i(),v(21,"input",10),p(22,ge,2,1,"div",6),i(),n(23,"div",4)(24,"label"),o(25,"Department"),i(),n(26,"select",11)(27,"option",8),o(28,"Select Department"),i(),p(29,Se,2,2,"option",9),i(),p(30,Ce,2,1,"div",6),i(),n(31,"div",4)(32,"label"),o(33,"Hire Date"),i(),v(34,"input",12),p(35,be,2,1,"div",6),i(),p(36,Ae,8,0,"div",13),n(37,"div",14)(38,"button",15),o(39,"Save"),i(),n(40,"a",16),o(41,"Cancel"),i()()()()()),l&2&&(d(2),s(r.isAddMode?"Add Employee":"Edit Employee"),d(2),a("formGroup",r.form),d(4),a("ngClass",f(16,h,r.f.employeeId.touched&&r.f.employeeId.errors)),d(),a("ngIf",r.f.employeeId.touched&&r.f.employeeId.errors),d(4),a("ngClass",f(18,h,r.f.userId.touched&&r.f.userId.errors)),d(3),a("ngForOf",r.users),d(),a("ngIf",r.f.userId.touched&&r.f.userId.errors),d(4),a("ngClass",f(20,h,r.f.position.touched&&r.f.position.errors)),d(),a("ngIf",r.f.position.touched&&r.f.position.errors),d(4),a("ngClass",f(22,h,r.f.departmentId.touched&&r.f.departmentId.errors)),d(3),a("ngForOf",r.departments),d(),a("ngIf",r.f.departmentId.touched&&r.f.departmentId.errors),d(4),a("ngClass",f(24,h,r.f.hireDate.touched&&r.f.hireDate.errors)),d(),a("ngIf",r.f.hireDate.touched&&r.f.hireDate.errors),d(),a("ngIf",!r.isAddMode),d(2),a("disabled",r.form.invalid))},dependencies:[R,C,x,U,J,K,B,z,G,P,$,H,b],encapsulation:2})}}return e})();var De=[{path:"",component:ie,canActivate:[D]},{path:"add",component:M,canActivate:[D],data:{roles:[N.Admin]}},{path:"edit/:id",component:M,canActivate:[D],data:{roles:[N.Admin]}}],ne=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=_({imports:[F.forChild(De),F]})}}return e})();var We=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=_({imports:[V,W,ne]})}}return e})();export{We as EmployeesModule};
